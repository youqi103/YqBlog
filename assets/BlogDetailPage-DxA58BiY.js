import{d as g,h as m,i as C,c as d,a as t,F as b,r as L,k as M,v as V,t as i,j as $,n as k,o as u,_ as w,m as B,p as H,b as j,u as A}from"./index-C-xbivHT.js";import{u as D}from"./messageStore-BpwE6j1m.js";import{a as _}from"./articles-Dc1-WQcr.js";const I={class:"message-container"},N={class:"message-list"},S={class:"user-info"},Z=["src"],T={class:"user-details"},z={class:"username"},E={class:"post-time"},F={class:"message-content"},P={class:"message-actions"},R=["onClick"],U={class:"comment_count"},q=["onClick"],G={class:"like_count"},J=["onClick"],K={class:"collect_count"},O={class:"comment-section"},Q={class:"comment-input"},W={class:"comment-actions"},X=["disabled"],Y=g({__name:"MessageComponent",props:{articleId:{}},setup(h){const v=h,o=D(),s=m(""),l=m(Number(v.articleId)||1),r=()=>{try{o.addMessage(s.value,l.value),s.value="",console.log("留言发布成功！")}catch(a){a instanceof Error&&console.error(`发布失败：${a.message}`)}};C(()=>{o.initAllMessages()});const c=()=>o.getMessagesByArticleId(l.value),y=a=>{o.toggleLike(a)},x=a=>{o.toggleCollect(a)},f=a=>{o.updateCommentCount(a)};return(a,n)=>(u(),d("div",I,[t("div",N,[(u(!0),d(b,null,L(c(),e=>(u(),d("div",{class:"message-item",key:e.id},[t("div",S,[t("img",{src:e.avatar,alt:"用户头像",class:"user-avatar"},null,8,Z),t("div",T,[t("div",z,i(e.username),1),t("div",E,i(e.time),1)])]),t("div",F,i(e.content),1),t("div",P,[t("div",{class:"action-item",onClick:p=>f(e.id)},[n[1]||(n[1]=$('<i class="action-icon" data-v-a41a189b><svg width="26" height="26" viewBox="0 0 48 48" fill="var(--text-primary)" xmlns="http://www.w3.org/2000/svg" data-v-a41a189b><path d="M44 6H4V36H13V41L23 36H44V6Z" fill="var(--text-primary)" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a41a189b></path><path d="M14 19.5V22.5" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a41a189b></path><path d="M24 19.5V22.5" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a41a189b></path><path d="M34 19.5V22.5" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-a41a189b></path></svg></i>',1)),t("span",U,i(e.commentCount),1)],8,R),t("div",{class:"action-item",onClick:p=>y(e.id),style:k({color:e.isLiked?"var(--primary-color)":"var(--text-secondary)"})},[n[2]||(n[2]=t("i",{class:"action-icon"},[t("svg",{width:"26",height:"26",viewBox:"0 0 48 48",fill:"var(--text-primary)",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M27.6002 18.5998V11.3998C27.6002 8.41743 25.1826 5.99977 22.2002 5.99977L15.0002 22.1998V41.9998H35.9162C37.7113 42.0201 39.2471 40.7147 39.5162 38.9398L42.0002 22.7398C42.1587 21.6955 41.8506 20.6343 41.1576 19.8373C40.4645 19.0403 39.4564 18.5878 38.4002 18.5998H27.6002Z",stroke:"#333","stroke-width":"4","stroke-linejoin":"round"}),t("path",{d:"M15 22.0001H10.194C8.08532 21.9628 6.2827 23.7095 6 25.7994V38.3994C6.2827 40.4894 8.08532 42.0367 10.194 41.9994H15V22.0001Z",fill:"var(--text-primary)",stroke:"#333","stroke-width":"4","stroke-linejoin":"round"})])],-1)),t("span",G,i(e.likeCount),1)],12,q),t("div",{class:"action-item",onClick:p=>x(e.id),style:k({color:e.isCollected?"var(--primary-color)":"var(--text-secondary)"})},[n[3]||(n[3]=t("i",{class:"action-icon"},[t("svg",{width:"26",height:"26",viewBox:"0 0 48 48",fill:"var(--text-primary)",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M23.9986 5L17.8856 17.4776L4 19.4911L14.0589 29.3251L11.6544 43L23.9986 36.4192L36.3454 43L33.9586 29.3251L44 19.4911L30.1913 17.4776L23.9986 5Z",fill:"var(--text-primary)",stroke:"#333","stroke-width":"4","stroke-linejoin":"round"})])],-1)),t("span",K,i(e.collectCount),1)],12,J)])]))),128))]),t("div",O,[t("div",Q,[M(t("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),placeholder:"留下你的精彩评论吧!",class:"comment-textarea",style:{"background-color":"var(--bg-main)",color:"var(--text-primary)"}},null,512),[[V,s.value]]),t("div",W,[t("button",{class:"post-btn",onClick:r,disabled:!s.value.trim()},"发布",8,X)])])])]))}}),tt=w(Y,[["__scopeId","data-v-a41a189b"]]),et={key:0,class:"blog-detail-container"},st={class:"article-header"},ot={class:"article-title"},at={class:"article-meta"},it={class:"publish-date"},nt={class:"article-content"},rt={class:"article-description"},ct=["innerHTML"],lt=g({__name:"BlogDetailPage",setup(h){const v=B(),o=Number(v.params.id),s=m(null);C(()=>{const r=[..._.latestArticles,..._.hotArticles,..._.myArticles];s.value=r.find(c=>c.id===o)||null});const l=r=>new Date(r).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"});return(r,c)=>s.value?(u(),d("div",et,[t("div",st,[t("h1",ot,i(s.value.title),1),t("div",at,[t("span",it,i(l(s.value.date)),1)])]),t("div",nt,[t("p",rt,i(s.value.description),1),t("div",{class:"article-body",innerHTML:s.value.content},null,8,ct)]),j(tt,{"article-id":A(o)},null,8,["article-id"])])):H("",!0)}}),_t=w(lt,[["__scopeId","data-v-58cc3d76"]]);export{_t as default};
